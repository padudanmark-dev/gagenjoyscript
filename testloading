-- Destroy existing
pcall(function() game.CoreGui:FindFirstChild("CustomLoadingUI"):Destroy() end)

-- Services
local UIS = game:GetService("UserInputService")
local CAS = game:GetService("ContextActionService")
local TS = game:GetService("TweenService")

-- Disable input
CAS:BindAction("DisableAllInput", function() return Enum.ContextActionResult.Sink end, false, unpack(Enum.UserInputType:GetEnumItems()))
UIS.ModalEnabled = true

-- Screen GUI
local gui = Instance.new("ScreenGui")
gui.Name = "CustomLoadingUI"
gui.IgnoreGuiInset = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
gui.DisplayOrder = 1000
gui.Parent = game.CoreGui

-- Background
local bg = Instance.new("Frame")
bg.Size = UDim2.new(1, 0, 1, 0)
bg.BackgroundColor3 = Color3.new(0, 0, 0)
bg.Parent = gui

-- Fade-in
bg.BackgroundTransparency = 1
TS:Create(bg, TweenInfo.new(2), {BackgroundTransparency = 0}):Play()

-- Particle effect
local particle = Instance.new("ImageLabel")
particle.Size = UDim2.new(1, 0, 1, 0)
particle.BackgroundTransparency = 1
particle.Image = "rbxassetid://10808459252" -- soft particles image
particle.ImageTransparency = 0.9
particle.ZIndex = 0
particle.Parent = bg

-- Glowing Title
local title = Instance.new("TextLabel")
title.Text = "SUBZERO SCRIPT"
title.Font = Enum.Font.GothamBlack
title.TextColor3 = Color3.fromRGB(0, 200, 255)
title.TextStrokeTransparency = 0.7
title.TextSize = 48
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, 0, 0, 60)
title.Position = UDim2.new(0, 0, 0.15, 0)
title.Parent = bg
title.TextTransparency = 1
TS:Create(title, TweenInfo.new(2), {TextTransparency = 0}):Play()

-- Animated System Messages
local status = Instance.new("TextLabel")
status.Text = "Initializing..."
status.Font = Enum.Font.Gotham
status.TextColor3 = Color3.fromRGB(180, 180, 180)
status.TextSize = 18
status.BackgroundTransparency = 1
status.Size = UDim2.new(1, 0, 0, 30)
status.Position = UDim2.new(0, 0, 0.25, 0)
status.Parent = bg

local messages = {
	"Checking assets...",
	"Verifying files...",
	"Running security scan...",
	"Injecting client...",
	"Syncing with server...",
	"Bypassing detection...",
	"Almost ready..."
}

-- Loading Tip
local tip = Instance.new("TextLabel")
tip.Text = "Tip: Don‚Äôt spam buttons"
tip.Font = Enum.Font.GothamItalic
tip.TextColor3 = Color3.fromRGB(200, 200, 200)
tip.TextSize = 16
tip.BackgroundTransparency = 1
tip.Size = UDim2.new(1, 0, 0, 30)
tip.Position = UDim2.new(0, 0, 0.72, 0)
tip.Parent = bg

local tips = {
	"Tip: Don‚Äôt spam buttons",
	"Tip: Use private servers for safety",
	"Tip: KRNL works best on fresh boots",
	"Tip: Report bugs if found",
	"Tip: Don‚Äôt exit during load"
}

-- Loading bar background
local barBg = Instance.new("Frame")
barBg.Size = UDim2.new(0.6, 0, 0, 28)
barBg.Position = UDim2.new(0.2, 0, 0.5, 0)
barBg.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
barBg.BorderSizePixel = 0
barBg.Parent = bg
Instance.new("UICorner", barBg).CornerRadius = UDim.new(0, 14)

-- Loading bar fill
local bar = Instance.new("Frame")
bar.Size = UDim2.new(0, 0, 1, 0)
bar.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
bar.BorderSizePixel = 0
bar.Parent = barBg
Instance.new("UICorner", bar).CornerRadius = UDim.new(0, 14)

-- Light Reflection Layer
local shine = Instance.new("Frame")
shine.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
shine.BackgroundTransparency = 0.85
shine.Size = UDim2.new(1, 0, 0.4, 0)
shine.Position = UDim2.new(0, 0, 0, 0)
shine.Parent = bar
Instance.new("UICorner", shine).CornerRadius = UDim.new(1, 0)

-- Percent + dots
local percentText = Instance.new("TextLabel")
percentText.Text = "Loading"
percentText.Font = Enum.Font.GothamBold
percentText.TextColor3 = Color3.new(1,1,1)
percentText.TextSize = 22
percentText.BackgroundTransparency = 1
percentText.Size = UDim2.new(1, 0, 0, 30)
percentText.Position = UDim2.new(0, 0, 0.57, 0)
percentText.Parent = bg

-- Time left
local timeText = Instance.new("TextLabel")
timeText.Text = "Time left: 1:30"
timeText.Font = Enum.Font.Gotham
timeText.TextColor3 = Color3.fromRGB(170, 170, 170)
timeText.TextSize = 16
timeText.BackgroundTransparency = 1
timeText.Size = UDim2.new(1, 0, 0, 20)
timeText.Position = UDim2.new(0, 0, 0.62, 0)
timeText.Parent = bg

-- Warning
local warning = Instance.new("TextLabel")
warning.Text = "‚ö†Ô∏è Don‚Äôt quit. If you exit while loading, there‚Äôs a high chance you‚Äôll get banned."
warning.Font = Enum.Font.GothamSemibold
warning.TextColor3 = Color3.fromRGB(255, 85, 85)
warning.TextSize = 18
warning.BackgroundTransparency = 1
warning.Size = UDim2.new(0.8, 0, 0, 40)
warning.Position = UDim2.new(0.1, 0, 0.68, 0)
warning.TextWrapped = true
warning.Parent = bg

-- Mute button
local muteBtn = Instance.new("TextButton")
muteBtn.Size = UDim2.new(0, 30, 0, 30)
muteBtn.Position = UDim2.new(0.97, -30, 0.03, 0)
muteBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
muteBtn.Text = "üîä"
muteBtn.Font = Enum.Font.Gotham
muteBtn.TextSize = 16
muteBtn.TextColor3 = Color3.new(1,1,1)
muteBtn.Parent = bg
Instance.new("UICorner", muteBtn).CornerRadius = UDim.new(1, 0)

-- Sounds
local music = Instance.new("Sound", bg)
music.SoundId = "rbxassetid://1844726405" -- Chill ambient
music.Volume = 0.3
music.Looped = true
music:Play()

local ding = Instance.new("Sound", bg)
ding.SoundId = "rbxassetid://9118823102"
ding.Volume = 1

-- Toggle mute
local isMuted = false
muteBtn.MouseButton1Click:Connect(function()
	isMuted = not isMuted
	music.Volume = isMuted and 0 or 0.3
	muteBtn.Text = isMuted and "üîá" or "üîä"
end)

-- Main loading animation (90s)
local duration = 90
local steps = 100

spawn(function()
	local dot = ""
	while percentText.Parent do
		for i = 1, 3 do
			percentText.Text = "Loading" .. string.rep(".", i)
			wait(0.5)
		end
	end
end)

spawn(function()
	while status and status.Parent do
		status.Text = messages[math.random(1, #messages)]
		wait(5)
	end
end)

spawn(function()
	while tip and tip.Parent do
		tip.Text = tips[math.random(1, #tips)]
		wait(7)
	end
end)

for i = 1, steps do
	local progress = i / steps
	bar:TweenSize(UDim2.new(progress, 0, 1, 0), "Out", "Sine", 0.4, true)
	timeText.Text = string.format("Time left: %d:%02d", math.floor((duration - i * (duration / steps)) / 60), math.floor((duration - i * (duration / steps)) % 60))
	if i == 25 or i == 50 or i == 75 then ding:Play() end
	wait(duration / steps)
end

-- Fade out
TS:Create(bg, TweenInfo.new(2), {BackgroundTransparency = 1}):Play()
wait(2)
gui:Destroy()
CAS:UnbindAction("DisableAllInput")
UIS.ModalEnabled = false
